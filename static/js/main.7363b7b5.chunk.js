(this.webpackJsonpfko=this.webpackJsonpfko||[]).push([[0],{132:function(e,n,t){e.exports=t.p+"static/media/logo.fc566f5e.png"},136:function(e,n,t){e.exports=t(213)},213:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(71),c=t.n(i),u=t(12),o=t(4),l=function(){return a.a.createElement("div",null,"admin page")},s=t(7),d=t.n(s),m=t(8),f=t(16),p=t(129),b=t.n(p),h=(t(142),t(5));function v(){var e=Object(h.a)(["\n  background: transparent;\n  border: 1px solid ",";\n  border-radius: 3px;\n  padding: 5px 10px;\n  cursor: pointer;\n\n  &:focus {\n    outline: none;\n    border-width: 2px;\n    padding: 4px 9px;\n  }\n\n  ","\n"]);return v=function(){return e},e}function g(){var e=Object(h.a)(["\n  background: ",";\n  color: ",";\n"]);return g=function(){return e},e}var x=Object(o.c)(g(),(function(e){return e.theme.secondary}),(function(e){return e.theme.white})),j=o.d.button(v(),(function(e){return e.theme.secondary}),(function(e){return e.isActive?x:null}));function w(){var e=Object(h.a)(["\n  font-size: ",";\n  font-family: ",";\n  margin-bottom: 10px;\n"]);return w=function(){return e},e}var E=o.d.h2(w(),(function(e){return e.theme.fontL}),(function(e){return e.theme.fontFamilySecondary})),O=function(e){var n=e.children,t=e.styles;return a.a.createElement(E,{style:t},n)},y=a.a.createContext(null),k=t(114),S=t(47),z=t(128),C=t(97),T=t.n(C),D=(t(146),t(147),function(e,n){return{status:e,message:n}}),P=function(e,n){return new Date(e).setHours(n.startsAt)},A=function(e){return new Date(e).getDay()},F=function(){return(new Date).setHours(0,0,0,0)},U=function(e){return{assignedTo:e.assignedTo,email:e.email,uid:e.uid,userName:e.userName}},B="Panel",N="Dost\u0119pne miejsca: ",L="Zapisani na",V="Nie masz konta?",W="Email",R="Strona g\u0142\xf3wna",q="Wypisz si\u0119",M="Zaloguj",H="Nikt si\u0119 jeszcze nie zapisa\u0142",I="Tego dnia nie ma trening\xf3w",Z="Has\u0142o",J="Zarejestruj si\u0119.",X="Zarejestruj",Y="Powt\xf3rz has\u0142o",K="Rezerwuj",Q="Wybierz dzie\u0144",_="Wybierz trening",G="Zaloguj si\u0119, \u017ceby zarezerwowa\u0107 miejsce",$="Zaloguj si\u0119",ee="Wyloguj",ne="Nazwa u\u017cytkownika",te="Jeste\u015b ju\u017c zapisany/a na ten trening",re="Nie uda\u0142o si\u0119\xa0wypisa\u0107 z treningu",ae="Nie uda\u0142o si\u0119 zapisa\u0107 na ten trening",ie="Nie ma ju\u017c wolnych miejsc na tym treningu",ce="Has\u0142o musi mie\u0107 > 6 znak\xf3w",ue="Wybierz trening",oe="Co\u015b posz\u0142o nie tak",le="Zapisano na trening",se="Wypisano z treningu",de="Taki u\u017cytkownik nie istnieje",me="Podany email ju\u017c istnieje",fe="Wpisane has\u0142o jest nieprawid\u0142owe",pe="To pole jest wymagane",be="Wpisz poprawny email",he="musi mie\u0107 minimum",ve="znak\xf3w",ge="Has\u0142a musz\u0105 pasowa\u0107",xe={apiKey:"AIzaSyDq3S8XrmtlpDdvOxFF8EAP696qWlZ_qzQ",authDomain:"fight-kompany.firebaseapp.com",databaseURL:"https://fight-kompany.firebaseio.com",projectId:"fight-kompany",storageBucket:"fight-kompany.appspot.com",messagingSenderId:"1076372164072"},je=a.a.createContext(null),we={value:"boks19",name:"Boks 19:00",capacity:15,startsAt:19,occure:[1,2,3,4,5]},Ee="/rezerwuj",Oe=F(),ye=function(e){var n=e.children,t=Object(r.useContext)(je),i=Object(r.useState)(15),c=Object(f.a)(i,2),o=c[0],l=c[1],s=Object(r.useState)([]),p=Object(f.a)(s,2),b=p[0],h=p[1],v=Object(r.useState)(!1),g=Object(f.a)(v,2),x=g[0],j=g[1],w=Object(r.useState)(!1),E=Object(f.a)(w,2),O=E[0],k=E[1],S=Object(r.useState)(we),z=Object(f.a)(S,2),C=z[0],T=z[1],D=Object(r.useState)(Oe),P=Object(f.a)(D,2),F=P[0],B=P[1],N=Object(r.useState)([]),L=Object(f.a)(N,2),V=L[0],W=L[1],R=Object(r.useState)(null),q=Object(f.a)(R,2),M=q[0],H=q[1],I=Object(u.g)();Object(r.useEffect)((function(){var e=!1;return function(){var n=Object(m.a)(d.a.mark((function n(){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return k(!0),n.next=3,t.getTrainings();case 3:r=n.sent,e||(W(r.sort((function(e,n){return e.startsAt-n.startsAt}))),k(!1));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){e=!0}}),[]),Object(r.useEffect)((function(){k(!0),t.auth.onAuthStateChanged(function(){var e=Object(m.a)(d.a.mark((function e(n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=22;break}return e.prev=1,e.next=4,t.getUser(n.uid);case 4:if(r=e.sent){e.next=11;break}return e.next=8,t.doSignOut();case 8:I.push("/zaloguj"),e.next=14;break;case 11:H(U(r)),j("ADMIN"===r.role),k(!1);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0),k(!1);case 20:e.next=26;break;case 22:H(null),j(!1),k(!1),I.push("/zaloguj");case 26:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(n){return e.apply(this,arguments)}}())}),[]),Object(r.useEffect)((function(){var e=!1;return function(){var n=Object(m.a)(d.a.mark((function n(){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getAvailableSpots(F,C);case 2:r=n.sent,e||l(r);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){e=!0}}),[F,C,M]),Object(r.useEffect)((function(){var e=!1,n=function(){var e=new Date;return{day:e.getDay(),hour:e.getHours(),minutes:e.getMinutes()}}(),t=V.filter((function(e){return Z(e,A(F))&&!J(e,n,A(F))}));return e||h(t),function(){e=!0}}),[V,F]);var Z=function(e,n){return e.occure.indexOf(n)>-1},J=function(e,n,t){return n.day===t&&e.startsAt+1<=n.hour},X=function(){var e=Object(m.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getUser(M.uid);case 2:n=e.sent,H(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(y.Provider,{value:{availableSpots:o,isLoading:O,isAdmin:x,handleSelectDate:function(e){B(function(e){return e.setHours(0,0,0,0)}(e)),T(we)},handleSelectTraining:function(e){return T(e)},refreshUserData:X,selectedDate:F,selectedTraining:C,trainings:b,userData:M}},n)};function ke(){var e=Object(h.a)(["\n  margin-bottom: 15px;\n"]);return ke=function(){return e},e}var Se=o.d.div(ke()),ze=function(e){var n=e.onClick,t=e.value;return a.a.createElement(j,{onClick:n},t)},Ce=F(),Te=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return new Date(n).setHours(0,0,0,0)+24*e*60*60*1e3}(7),De=function(e){var n=e.headerLabel,t=Object(r.useContext)(y),i=t.handleSelectDate,c=t.selectedDate;return a.a.createElement(Se,null,a.a.createElement(O,null,n),a.a.createElement(b.a,{dateFormat:"dd/MM/yyyy",selected:c,onChange:function(e){return i(e)},minDate:Ce,maxDate:Te,customInput:a.a.createElement(ze,null)}))};function Pe(){var e=Object(h.a)(["\n  position: fixed;\n  background-color: ",";\n  width: 300px;\n  height: 50px;\n  top: 50%;\n  right: 0;\n  transition: transform 0.5s ease;\n  border: 1px solid black;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  ",";\n"]);return Pe=function(){return e},e}var Ae=o.d.div(Pe(),(function(e){return e.theme.white}),(function(e){return e.isVisible?"transform: translateX(-20px) translateY(50%)":"transform: translateX(100%) translateY(50%)"})),Fe=function(e){var n=e.children,t=e.isVisible;return a.a.createElement(Ae,{isVisible:t},n)},Ue=function(e){var n=e.isActive,t=void 0!==n&&n,r=e.onClick,i=e.trainingName;return a.a.createElement(j,{isActive:t,onClick:r},i)};function Be(){var e=Object(h.a)(["\n  margin-right: 10px;\n  margin-top: 10px;\n\n  &:first-child {\n    margin-top: 0;\n  }\n\n  &:last-child {\n    margin-right: 0;\n  }\n\n  @media (min-width: ",") {\n    margin-top: 0;\n  }\n"]);return Be=function(){return e},e}function Ne(){var e=Object(h.a)(["\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: ",") {\n    flex-direction: row;\n  }\n"]);return Ne=function(){return e},e}function Le(){var e=Object(h.a)(["\n  margin-bottom: 15px;\n"]);return Le=function(){return e},e}var Ve=o.d.div(Le()),We=o.d.ul(Ne(),(function(e){return e.theme.mobileBP})),Re=o.d.li(Be(),(function(e){return e.theme.mobileBP})),qe=function(e){var n=e.headerLabel,t=Object(r.useContext)(y),i=t.trainings,c=t.handleSelectTraining,u=t.selectedTraining;return a.a.createElement(Ve,null,a.a.createElement(O,null,n),a.a.createElement(We,null,0===i.length?I:i.map((function(e){return a.a.createElement(Re,{key:e.name},a.a.createElement(Ue,{isActive:u.value===e.value,trainingName:e.name,onClick:function(){return c(e)}}))}))))};function Me(){var e=Object(h.a)(["\n  background-color: ",";\n  color: ",";\n  border: none;\n  padding: 5px 10px;\n  border-radius: 3px;\n  cursor: pointer;\n\n  transition: all 0.3s ease;\n\n  &:hover {\n    background-color: ",";\n    color: ",";\n    border: 1px solid ",";\n  }\n"]);return Me=function(){return e},e}var He=o.d.button(Me(),(function(e){return e.theme.primary}),(function(e){return e.theme.white}),(function(e){return e.theme.white}),(function(e){return e.theme.primary}),(function(e){return e.theme.primary})),Ie=function(e){var n=e.label,t=e.onClick,i=Object(r.useContext)(je),c=Object(u.g)();return a.a.createElement(He,{onClick:function(){i.auth.currentUser.emailVerified?t():c.push("/potwierdz-email")}},n)};function Ze(){var e=Object(h.a)(["\n  margin-bottom: 10px;\n"]);return Ze=function(){return e},e}var Je=o.d.div(Ze()),Xe=function(e){var n=e.label,t=Object(r.useContext)(y),i=t.availableSpots;return 0!==t.trainings.length&&a.a.createElement(Je,null,a.a.createElement("span",null,n),a.a.createElement("span",null,i))};function Ye(){var e=Object(h.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  color: ",";\n  padding: 5px;\n  margin-left: 10px;\n\n  cursor: pointer;\n"]);return Ye=function(){return e},e}function Ke(){var e=Object(h.a)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n"]);return Ke=function(){return e},e}var Qe=o.d.div(Ke()),_e=o.d.button(Ye(),(function(e){return e.theme.white}),(function(e){return e.theme.secondary}),(function(e){return e.theme.secondary})),Ge=function(e){var n=e.handleSignOutFromTraining,t=e.user,i=Object(r.useContext)(y).userData;return a.a.createElement(Qe,null,t.userName,i&&t.uid===i.uid?a.a.createElement(_e,{onClick:n},q):null)};function $e(){var e=Object(h.a)(["\n  margin-bottom: 10px;\n"]);return $e=function(){return e},e}function en(){var e=Object(h.a)(["\n  list-style: none;\n  margin-top: 20px;\n"]);return en=function(){return e},e}var nn=o.d.ul(en()),tn=o.d.li($e()),rn=function(e){var n=e.handleSignOutFromTraining,t=Object(r.useState)([]),i=Object(f.a)(t,2),c=i[0],u=i[1],o=Object(r.useState)(""),l=Object(f.a)(o,2),s=l[0],p=l[1],b=Object(r.useContext)(je),h=Object(r.useContext)(y),v=h.selectedDate,g=h.selectedTraining,x=h.trainings,j=h.userData;return Object(r.useEffect)((function(){var e=!1;return function(){var n=Object(m.a)(d.a.mark((function n(){var t,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=P(v,g),n.next=3,b.getReservations(t,g.value);case 3:r=n.sent,e||u(r);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),e||p("".concat(g.name," "," | "," ").concat(function(e){var n=new Date(e),t=n.getDate(),r=n.getMonth()+1,a=n.getFullYear();return"".concat(t,"-").concat(r,"-").concat(a)}(v))),function(){e=!0}}),[v,g,j]),x.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,L," ",s),a.a.createElement(nn,null,0===c.length?H:c.map((function(e){return a.a.createElement(tn,{key:e.email},a.a.createElement(Ge,{handleSignOutFromTraining:n,user:e}))}))))};function an(){var e=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-top: 30px;\n  padding: 0;\n\n  @media (min-width: ",") {\n    margin-top: 0;\n    padding: 0 30px;\n  }\n"]);return an=function(){return e},e}function cn(){var e=Object(h.a)([""]);return cn=function(){return e},e}function un(){var e=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  padding: 0 10px;\n  margin: 30px auto;\n\n  @media (min-width: ",") {\n    max-width: 90vw;\n    flex-direction: row;\n  }\n"]);return un=function(){return e},e}var on=o.d.section(un(),(function(e){return e.theme.mobileBP})),ln=o.d.div(cn()),sn=o.d.div(an(),(function(e){return e.theme.mobileBP})),dn=function(){var e=Object(r.useState)(null),n=Object(f.a)(e,2),t=n[0],i=n[1],c=Object(r.useContext)(je),u=Object(r.useContext)(y),o=u.refreshUserData,l=u.selectedDate,s=u.selectedTraining,p=u.trainings,b=u.userData,h=function(e,n){i(e),setTimeout((function(){i(null)}),n)},v=function(){var e=Object(m.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.reserveTrainingSpot(l,s,b);case 2:n=e.sent,o(),h(n.message,3e3);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.freeTrainingSpot(l,s,b);case 2:n=e.sent,o(),h(n.message,3e3);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(on,null,a.a.createElement(ln,null,a.a.createElement(De,{headerLabel:Q}),a.a.createElement(qe,{headerLabel:_}),a.a.createElement(Xe,{label:N}),p.length>0&&a.a.createElement(Ie,{label:"Zapisz mnie",onClick:v})),a.a.createElement(sn,null,a.a.createElement(rn,{handleSignOutFromTraining:g})),a.a.createElement(Fe,{isVisible:!!t},t))},mn=t(132),fn=t.n(mn),pn=function(e){var n=e.styles;return a.a.createElement("img",{alt:"Fight Kompany",src:fn.a,style:Object(S.a)({display:"block",maxWidth:"100%"},n)})},bn=t(18);function hn(){var e=Object(h.a)(["\n  padding: 0;\n  margin-top: 30px;\n\n  @media (min-width: ",") {\n    padding: 30px 50px;\n    margin-top: 0;\n  }\n"]);return hn=function(){return e},e}function vn(){var e=Object(h.a)([""]);return vn=function(){return e},e}function gn(){var e=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 0 10px;\n  margin: 30px auto;\n\n  @media (min-width: ",") {\n    max-width: 90vw;\n    flex-direction: row;\n  }\n"]);return gn=function(){return e},e}function xn(){var e=Object(h.a)(["\n  text-decoration: none;\n  color: ",";\n"]);return xn=function(){return e},e}var jn=Object(o.d)(bn.b)(xn(),(function(e){return e.theme.secondary})),wn=o.d.section(gn(),(function(e){return e.theme.mobileBP})),En=o.d.div(vn()),On=o.d.div(hn(),(function(e){return e.theme.mobileBP})),yn=function(){var e=Object(r.useContext)(y).userData;return a.a.createElement(wn,null,a.a.createElement(En,null,a.a.createElement(pn,null)),a.a.createElement(On,null,a.a.createElement(De,{headerLabel:Q}),a.a.createElement(qe,{headerLabel:_}),a.a.createElement(Xe,{label:N}),!e&&a.a.createElement(jn,{to:"/zaloguj"},G)))};function kn(){var e=Object(h.a)([""]);return kn=function(){return e},e}function Sn(){var e=Object(h.a)(["\n  padding: 10px;\n  margin: 0 auto;\n  margin-top: 30px;\n\n  @media (min-width: ",") {\n    padding: 0;\n    max-width: 90vw;\n  }\n"]);return Sn=function(){return e},e}function zn(){var e=Object(h.a)(["\n  list-style: none;\n"]);return zn=function(){return e},e}o.d.ul(zn()),o.d.section(Sn(),(function(e){return e.theme.mobileBP})),o.d.li(kn());function Cn(){var e=Object(h.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return Cn=function(){return e},e}var Tn=o.d.section(Cn()),Dn=function(){return a.a.createElement(Tn,null,"not found")},Pn=t(23),An=t(66),Fn=function(e){var n=e.initialValues,t=e.onSubmit,r=e.validationSchema,i=e.children;return a.a.createElement(An.a,{initialValues:n,onSubmit:t,validationSchema:r},(function(){return a.a.createElement(a.a.Fragment,null,i)}))},Un=t(91);function Bn(){var e=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]);return Bn=function(){return e},e}function Nn(){var e=Object(h.a)(["\n  display: block;\n  width: 100%;\n  padding: 5px;\n  background-color: ",";\n  border: 1px solid ",";\n  font-size: ",";\n\n  &:focus {\n    outline: none;\n    border: 2px solid black;\n    padding: 4px;\n  }\n"]);return Nn=function(){return e},e}function Ln(){var e=Object(h.a)(["\n  font-size: ",";\n  margin-bottom: 5px;\n"]);return Ln=function(){return e},e}var Vn=o.d.label(Ln(),(function(e){return e.theme.fontS})),Wn=o.d.input(Nn(),(function(e){return e.theme.white}),(function(e){return e.theme.secondary}),(function(e){return e.theme.fontM})),Rn=o.d.div(Bn()),qn=function(e){var n=e.type,t=e.label,r=Object(Un.a)(e,["type","label"]);return a.a.createElement(Rn,null,a.a.createElement(Vn,null,t),a.a.createElement(Wn,Object.assign({type:n},r)))},Mn=function(e){var n=e.error;return e.isVisible?a.a.createElement("p",null,n):null};function Hn(){var e=Object(h.a)(["\n  position: relative;\n  width: 100%;\n  margin-bottom: 20px;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n\n  & > p:last-child {\n    position: absolute;\n    left: 0;\n    bottom: -15px;\n    font-size: 10px;\n    color: ",";\n  }\n"]);return Hn=function(){return e},e}var In=o.d.div(Hn(),(function(e){return e.theme.primary})),Zn=function(e){var n=e.name,t=e.type,r=e.width,i=void 0===r?"100%":r,c=Object(Un.a)(e,["name","type","width"]),u=Object(An.b)(),o=u.setFieldTouched,l=u.handleChange,s=u.errors,d=u.touched;return a.a.createElement(In,{style:{width:i}},a.a.createElement(qn,Object.assign({name:n,type:t,onBlur:function(){return o(n)},onChange:l(n)},c)),a.a.createElement(Mn,{error:s[n],isVisible:d[n]}))};function Jn(){var e=Object(h.a)(["\n  display: block;\n  background-color: ",";\n  border: none;\n  padding: 10px 15px;\n  color: ",";\n  font-size: ",";\n  text-transform: uppercase;\n  cursor: pointer;\n\n  &:focus {\n    outline: none;\n  }\n"]);return Jn=function(){return e},e}var Xn=o.d.button(Jn(),(function(e){return e.theme.secondary}),(function(e){return e.theme.white}),(function(e){return e.theme.fontM})),Yn=function(e){var n=e.label,t=e.style,r=Object(An.b)().handleSubmit;return a.a.createElement(Xn,{type:"submit",onClick:r,style:t},n)};function Kn(){var e=Object(h.a)(["\n  width: 100%;\n  max-width: 320px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 30px auto;\n  padding: 0 10px;\n\n  @media (min-width: ",") {\n    padding: 0;\n  }\n"]);return Kn=function(){return e},e}var Qn=o.d.section(Kn(),(function(e){return e.theme.mobileBP})),_n=function(e){var n=e.children;return a.a.createElement(Qn,null,a.a.createElement(pn,{styles:{width:"200px",marginBottom:"30px"}}),n)};Pn.c({mixed:{required:pe},string:{email:be,min:function(e){return"".concat(e.label," ").concat(he," ").concat(e.min," ").concat(ve)}}});var Gn=Pn.a().shape({email:Pn.d().required().email().label(W),userName:Pn.d().required().min(6).label(ne),password:Pn.d().required().min(6).label(Z),confirmPassword:Pn.d().oneOf([Pn.b("password"),null],ge).required().label(Y)}),$n={email:"",userName:"",password:"",confirmPassword:""},et=function(){var e=Object(r.useState)(null),n=Object(f.a)(e,2),t=n[0],i=n[1],c=Object(u.g)(),o=Object(r.useContext)(je),l=function(e,n){i(e),setTimeout((function(){i(null)}),n)};return a.a.createElement(_n,null,a.a.createElement(Fn,{initialValues:$n,onSubmit:function(e){return function(e){var n=e.email,t=e.password,r=e.userName;o.doCreateUserWithEmailAndPassword(n,t).then(function(){var e=Object(m.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,o.saveUserToFirestore(n,{strikes:0,assignedTo:[],role:"USER",userName:r});case 3:o.sendEmailVerification(),c.push("/potwierdz-email"),o.doSignOut();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),"auth/email-already-in-use"===e.code?l(me,3e3):"auth/weak-password"===e.code&&l(ce,3e3)}))}(e)},validationSchema:Gn},a.a.createElement(Zn,{name:"email",type:"email",label:W}),a.a.createElement(Zn,{name:"userName",type:"text",label:ne}),a.a.createElement(Zn,{name:"password",type:"password",label:Z}),a.a.createElement(Zn,{name:"confirmPassword",type:"password",label:Y}),a.a.createElement(Yn,{label:X})),a.a.createElement(Fe,{isVisible:!!t},t))};function nt(){var e=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  max-width: 400px;\n  margin: 25px auto;\n"]);return nt=function(){return e},e}function tt(){var e=Object(h.a)(["\n  display: flex;\n  margin-top: 30px;\n"]);return tt=function(){return e},e}function rt(){var e=Object(h.a)(["\n  text-decoration: none;\n  font-size: ",";\n  color: ",";\n  margin-left: 5px;\n"]);return rt=function(){return e},e}var at=Object(o.d)(bn.b)(rt(),(function(e){return e.theme.fontM}),(function(e){return e.theme.primary})),it=o.d.div(tt());o.d.div(nt());Pn.c({mixed:{required:pe},string:{email:be,min:function(e){return"".concat(e.label," ").concat(he," ").concat(e.min," ").concat(ve)}}});var ct=Pn.a().shape({email:Pn.d().required().email().label(W),password:Pn.d().required().min(6).label(Z)}),ut={email:"",password:""},ot=function(){var e=Object(r.useState)(null),n=Object(f.a)(e,2),t=n[0],i=n[1],c=Object(r.useContext)(je),u=function(e,n){i(e),setTimeout((function(){i(null)}),n)};return a.a.createElement(_n,null,a.a.createElement(Fn,{initialValues:ut,onSubmit:function(e){return function(e){var n=e.email,t=e.password;c.doSignInWithEmailAndPassword(n,t).then(function(){var e=Object(m.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){"auth/user-not-found"===e.code?u(de,3e3):"auth/wrong-password"===e.code&&u(fe,3e3)}))}(e)},validationSchema:ct},a.a.createElement(Zn,{name:"email",type:"email",label:W}),a.a.createElement(Zn,{name:"password",type:"password",label:Z}),a.a.createElement(Yn,{label:M})),a.a.createElement(it,null,a.a.createElement("p",null,V),a.a.createElement(at,{to:"/zarejestruj"},J)),a.a.createElement(Fe,{isVisible:!!t},t))};function lt(){var e=Object(h.a)(["\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return lt=function(){return e},e}function st(){var e=Object(h.a)(["\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n\n  & div {\n    position: absolute;\n    width: 16px;\n    height: 16px;\n    border-radius: 50%;\n    background: ",";\n    animation: lds-grid 1.2s linear infinite;\n  }\n\n  & div:nth-child(1) {\n    top: 8px;\n    left: 8px;\n    animation-delay: 0s;\n  }\n\n  & div:nth-child(2) {\n    top: 8px;\n    left: 32px;\n    animation-delay: -0.4s;\n  }\n\n  & div:nth-child(3) {\n    top: 8px;\n    left: 56px;\n    animation-delay: -0.8s;\n  }\n\n  & div:nth-child(4) {\n    top: 32px;\n    left: 8px;\n    animation-delay: -0.4s;\n  }\n\n  & div:nth-child(5) {\n    top: 32px;\n    left: 32px;\n    animation-delay: -0.8s;\n  }\n\n  & div:nth-child(6) {\n    top: 32px;\n    left: 56px;\n    animation-delay: -1.2s;\n  }\n\n  & div:nth-child(7) {\n    top: 56px;\n    left: 8px;\n    animation-delay: -0.8s;\n  }\n\n  & div:nth-child(8) {\n    top: 56px;\n    left: 32px;\n    animation-delay: -1.2s;\n  }\n\n  & div:nth-child(9) {\n    top: 56px;\n    left: 56px;\n    animation-delay: -1.6s;\n  }\n\n  @keyframes lds-grid {\n    0%,\n    100% {\n      opacity: 1;\n    }\n    50% {\n      opacity: 0.5;\n    }\n  }\n"]);return st=function(){return e},e}var dt=o.d.div(st(),(function(e){return e.theme.secondary})),mt=o.d.div(lt()),ft=function(){return a.a.createElement(mt,null,a.a.createElement(dt,null,a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null)))};function pt(){var e=Object(h.a)(["\n  ",";\n  cursor: pointer;\n"]);return pt=function(){return e},e}function bt(){var e=Object(h.a)(["\n  list-style: none;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  max-width: 400px;\n  margin: 0;\n\n  @media (min-width: ",") {\n    justify-content: flex-end;\n    max-width: 100%;\n  }\n"]);return bt=function(){return e},e}function ht(){var e=Object(h.a)(["\n  width: 100%;\n  background-color: ",";\n  border-bottom: 2px solid ",";\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  padding: 20px 10px;\n"]);return ht=function(){return e},e}function vt(){var e=Object(h.a)(["\n  ","\n"]);return vt=function(){return e},e}function gt(){var e=Object(h.a)(["\n  color: ",";\n  font-size: ",";\n  padding: 10px;\n  margin-left: 10px;\n  text-decoration: none;\n\n  &:first-child {\n    margin-left: 0;\n  }\n\n  @media (min-width: ",") {\n    font-size: ",";\n  }\n"]);return gt=function(){return e},e}var xt,jt=Object(o.c)(gt(),(function(e){return e.theme.secondary}),(function(e){return e.theme.fontM}),(function(e){return e.theme.mobileBP}),(function(e){return e.theme.fontL})),wt=Object(o.d)(bn.b)(vt(),jt),Et=o.d.nav(ht(),(function(e){return e.theme.white}),(function(e){return e.theme.secondary})),Ot=o.d.ul(bt(),(function(e){return e.theme.mobileBP})),yt=o.d.a(pt(),jt),kt=(xt=yt,function(e){var n=Object.assign({},e),t=Object(r.useContext)(je),i=Object(u.g)();return a.a.createElement(xt,Object.assign({onClick:function(){t.doSignOut(),i.push("/")}},n))}),St=a.a.createElement(a.a.Fragment,null,a.a.createElement("li",null,a.a.createElement(wt,{to:"/"},R)),a.a.createElement("li",null,a.a.createElement(wt,{to:"/zaloguj"},$))),zt=function(e){var n=e.isAdmin,t=Object(r.useContext)(y).userData;return a.a.createElement(Et,null,a.a.createElement(Ot,null,t?function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("li",null,a.a.createElement(wt,{to:Ee},K)),e?a.a.createElement("li",null,a.a.createElement(wt,{to:"/admin"},B)):null,a.a.createElement("li",null,a.a.createElement(kt,null,ee)))}(n):St))},Ct=function(e){var n=e.children,t=e.path,i=e.isAdmin,c=void 0!==i&&i,o=e.isAdminRoute,l=void 0!==o&&o,s=Object(r.useContext)(je).auth.currentUser,d=a.a.createElement(u.b,{path:t},n),m=a.a.createElement(u.a,{to:"/"});return l?c?d:m:s?d:m},Tt={fontFamily:"Barlow Semi Condensed",fontFamilyLight:"Barlow Light Condensed",fontFamilySecondary:"Roboto Light Condensed",fontM:"18px",fontS:"16px",fontL:"24px",primary:"#ed1c24",secondary:"#0e0d3e",grey:"#eaeaea",white:"#ffffff",mobileBP:"767px"};function Dt(){var e=Object(h.a)(["\n    *, *::after, *::before {\n        box-sizing: border-box;\n        padding: 0;\n        margin: 0;\n    }\n\n    body {\n        font-family: ",", Open-Sans, Helvetica, Sans-Serif;\n        font-size: ",";\n        color: ",";\n        overflow-x: hidden;\n    }\n\n    #root {\n        height: 100vh;\n        height: calc(var(--vh, 1vh) * 100);\n    }\n"]);return Dt=function(){return e},e}var Pt=Object(o.b)(Dt(),Tt.fontFamily,Tt.fontM,Tt.secondary);var At=function(){var e=Object(r.useContext)(y),n=e.isLoading,t=e.isAdmin,i=e.userData,c=Object(u.g)();return Object(r.useEffect)((function(){var e=function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(r.useEffect)((function(){i&&c.push(Ee)}),[i]),a.a.createElement(o.a,{theme:Tt},a.a.createElement(Pt,null),n?a.a.createElement(ft,null):a.a.createElement(a.a.Fragment,null,a.a.createElement(zt,{isAdmin:t}),a.a.createElement(u.d,null,a.a.createElement(u.b,{exact:!0,path:"/"},a.a.createElement(yn,null)),a.a.createElement(u.b,{exact:!0,path:"/zarejestruj"},a.a.createElement(et,null)),a.a.createElement(u.b,{exact:!0,path:"/zaloguj"},a.a.createElement(ot,null)),a.a.createElement(Ct,{exact:!0,path:Ee},a.a.createElement(dn,null)),a.a.createElement(Ct,{exact:!0,path:"/admin",isAdmin:t,isAdminRoute:!0},a.a.createElement(l,null)),a.a.createElement(u.b,{exact:!0,path:"/potwierdz-email"},a.a.createElement("p",null,"zweryfikuj email")),a.a.createElement(u.b,null,a.a.createElement(Dn,null)))))};c.a.render(a.a.createElement(je.Provider,{value:new function e(){var n=this;Object(z.a)(this,e),this.getAvailableSpots=function(){var e=Object(m.a)(d.a.mark((function e(t,r){var a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",ue);case 2:return a=P(t,r),e.next=5,n.getReservations(a,r.value);case 5:return i=e.sent,e.abrupt("return",r.capacity-i.length);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),this.getReservations=function(){var e=Object(m.a)(d.a.mark((function e(t,r){var a,i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return a=[],i=n.db.doc("".concat(r,"/").concat(t)),e.prev=4,e.next=7,i.get();case 7:(c=e.sent).exists?a=c.data().reservations:console.log("No such document! ".concat(r,"/").concat(t)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("Error getting document! - ".concat(r,"/").concat(t),e.t0);case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(n,t){return e.apply(this,arguments)}}(),this.getTrainings=Object(m.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.db.collection("trainings").get();case 3:return t=e.sent,r=t.docs.map((function(e){return e.data()})),e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),console.log("Error getting trainings",e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),this.getUser=function(){var e=Object(m.a)(d.a.mark((function e(t){var r,a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.db.doc("users/".concat(t)),e.prev=1,e.next=4,a.get();case 4:(i=e.sent).exists?r=i.data():console.log("There is no users with given id",t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Error getting user",t);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),this.reserveTrainingSpot=function(){var e=Object(m.a)(d.a.mark((function e(t,r,a){var i,c,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r&&a){e.next=2;break}return e.abrupt("return",D(400,oe));case 2:return i=P(t,r),e.next=5,n.getReservations(i,r.value);case 5:if(c=e.sent,!!!c.find((function(e){return e.uid===a.uid}))){e.next=9;break}return e.abrupt("return",D(204,te));case 9:if(c.length!==r.capacity){e.next=11;break}return e.abrupt("return",D(204,ie));case 11:return u=Object(S.a)(Object(S.a)({},a),{},{assignedTo:[].concat(Object(k.a)(a.assignedTo),[i]).sort()}),e.prev=12,e.next=15,n.db.doc("".concat(r.value,"/").concat(i)).set({reservations:[].concat(Object(k.a)(c),[u])});case 15:return e.next=17,n.updateUser(u.uid,u);case 17:return e.abrupt("return",D(200,le));case 20:return e.prev=20,e.t0=e.catch(12),console.log("Error saving data",e.t0),e.abrupt("return",D(500,ae));case 24:case"end":return e.stop()}}),e,null,[[12,20]])})));return function(n,t,r){return e.apply(this,arguments)}}(),this.freeTrainingSpot=function(){var e=Object(m.a)(d.a.mark((function e(t,r,a){var i,c,u,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r&&a){e.next=2;break}return e.abrupt("return",D(400,oe));case 2:return i=P(t,r),e.next=5,n.getReservations(i,r.value);case 5:return c=e.sent,u=c.filter((function(e){return e.uid!==a.uid})),o=Object(S.a)(Object(S.a)({},a),{},{assignedTo:a.assignedTo.filter((function(e){return e!==i}))}),e.prev=8,e.next=11,n.db.doc("".concat(r.value,"/").concat(i)).set({reservations:u});case 11:return e.next=13,n.updateUser(o.uid,o);case 13:return e.abrupt("return",D(200,se));case 16:return e.prev=16,e.t0=e.catch(8),console.log("Error saving data",e.t0),e.abrupt("return",D(500,re));case 20:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(n,t,r){return e.apply(this,arguments)}}(),this.updateUser=function(){var e=Object(m.a)(d.a.mark((function e(t,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n.db.doc("users/".concat(t)).set(r)}catch(a){console.log("Couldn't update user",t,a)}case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),this.doCreateUserWithEmailAndPassword=function(e,t){return n.auth.createUserWithEmailAndPassword(e,t)},this.doSignInWithEmailAndPassword=function(e,t){return n.auth.signInWithEmailAndPassword(e,t)},this.doSignOut=function(){return n.auth.signOut()},this.doPasswordReset=function(e){return n.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return n.auth.currentUser.updatePassword(e)},this.saveUserToFirestore=function(){var e=Object(m.a)(d.a.mark((function e(t,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,n.db.doc("users/".concat(t.user.uid)).set(Object(S.a)({uid:t.user.uid,email:t.user.email},r));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(n,t){return e.apply(this,arguments)}}(),this.sendEmailVerification=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.currentUser.sendEmailVerification();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),T.a.initializeApp(xe),this.auth=T.a.auth(),this.db=T.a.firestore()}},a.a.createElement(bn.a,{basename:"/"},a.a.createElement(ye,null,a.a.createElement(At,null)))),document.getElementById("root"))}},[[136,1,2]]]);
//# sourceMappingURL=main.7363b7b5.chunk.js.map
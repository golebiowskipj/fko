(this.webpackJsonpfko=this.webpackJsonpfko||[]).push([[0],{132:function(n,e,t){n.exports=t.p+"static/media/logo.fc566f5e.png"},136:function(n,e,t){n.exports=t(213)},213:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),i=t(71),c=t.n(i),u=t(11),o=t(4),l=function(){return a.a.createElement("div",null,"admin page")},s=t(7),d=t.n(s),m=t(12),f=t(16),p=t(129),b=t.n(p),h=(t(142),t(5));function v(){var n=Object(h.a)(["\n  background: transparent;\n  border: 1px solid ",";\n  border-radius: 3px;\n  padding: 5px 10px;\n  cursor: pointer;\n\n  &:focus {\n    outline: none;\n    border-width: 2px;\n    padding: 4px 9px;\n  }\n\n  ","\n"]);return v=function(){return n},n}function g(){var n=Object(h.a)(["\n  background: ",";\n  color: ",";\n"]);return g=function(){return n},n}var x=Object(o.c)(g(),(function(n){return n.theme.secondary}),(function(n){return n.theme.white})),j=o.d.button(v(),(function(n){return n.theme.secondary}),(function(n){return n.isActive?x:null}));function w(){var n=Object(h.a)(["\n  font-size: ",";\n  font-family: ",";\n  margin-bottom: 10px;\n"]);return w=function(){return n},n}var E=o.d.h2(w(),(function(n){return n.theme.fontL}),(function(n){return n.theme.fontFamilySecondary})),y=function(n){var e=n.children,t=n.styles;return a.a.createElement(E,{style:t},e)},O=a.a.createContext(null),k=t(114),S=t(47),z=t(128),C=t(97),T=t.n(C),D=(t(146),t(147),function(n,e){return{status:n,message:e}}),P=function(n,e){return new Date(n).setHours(e.startsAt)},A=function(n){return new Date(n).getDay()},F=function(){return(new Date).setHours(0,0,0,0)},B=function(n){return{assignedTo:n.assignedTo,email:n.email,uid:n.uid,userName:n.userName}},N="Panel",U="Dost\u0119pne miejsca: ",L="Zapisani na",W="Nie masz konta?",R="Email",V="Strona g\u0142\xf3wna",q="Wypisz si\u0119",M="Zaloguj",H="Nikt si\u0119 jeszcze nie zapisa\u0142",I="Tego dnia nie ma trening\xf3w",Z="Has\u0142o",J="Zarejestruj si\u0119.",X="Zarejestruj",Y="Powt\xf3rz has\u0142o",K="Rezerwuj",Q="Wybierz dzie\u0144",_="Wybierz trening",G="Zaloguj si\u0119, \u017ceby zarezerwowa\u0107 miejsce",$="Zaloguj si\u0119",nn="Wyloguj",en="Nazwa u\u017cytkownika",tn="Jeste\u015b ju\u017c zapisany/a na ten trening",rn="Nie uda\u0142o si\u0119\xa0wypisa\u0107 z treningu",an="Nie uda\u0142o si\u0119 zapisa\u0107 na ten trening",cn="Nie ma ju\u017c wolnych miejsc na tym treningu",un="Has\u0142o musi mie\u0107 > 6 znak\xf3w",on="Wybierz trening",ln="Co\u015b posz\u0142o nie tak",sn="Zapisano na trening",dn="Wypisano z treningu",mn="Taki u\u017cytkownik nie istnieje",fn="Podany email ju\u017c istnieje",pn="Wpisane has\u0142o jest nieprawid\u0142owe",bn="To pole jest wymagane",hn="Wpisz poprawny email",vn="musi mie\u0107 minimum",gn="znak\xf3w",xn="Has\u0142a musz\u0105 pasowa\u0107",jn={apiKey:"AIzaSyDq3S8XrmtlpDdvOxFF8EAP696qWlZ_qzQ",authDomain:"fight-kompany.firebaseapp.com",databaseURL:"https://fight-kompany.firebaseio.com",projectId:"fight-kompany",storageBucket:"fight-kompany.appspot.com",messagingSenderId:"1076372164072"},wn=a.a.createContext(null),En={value:"boks19",name:"Boks 19:00",capacity:15,startsAt:19,occure:[1,2,3,4,5]},yn=F(),On=function(n){var e=n.children,t=Object(r.useContext)(wn),i=Object(r.useState)(15),c=Object(f.a)(i,2),u=c[0],o=c[1],l=Object(r.useState)([]),s=Object(f.a)(l,2),p=s[0],b=s[1],h=Object(r.useState)(!1),v=Object(f.a)(h,2),g=v[0],x=v[1],j=Object(r.useState)(!1),w=Object(f.a)(j,2),E=w[0],y=w[1],k=Object(r.useState)(En),S=Object(f.a)(k,2),z=S[0],C=S[1],T=Object(r.useState)(yn),D=Object(f.a)(T,2),P=D[0],F=D[1],N=Object(r.useState)([]),U=Object(f.a)(N,2),L=U[0],W=U[1],R=Object(r.useState)(null),V=Object(f.a)(R,2),q=V[0],M=V[1];Object(r.useEffect)((function(){var n=!1;return function(){var e=Object(m.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,t.getTrainings();case 3:r=e.sent,n||(W(r.sort((function(n,e){return n.startsAt-e.startsAt}))),y(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){n=!0}}),[]),Object(r.useEffect)((function(){y(!0),t.auth.onAuthStateChanged(function(){var n=Object(m.a)(d.a.mark((function n(e){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=16;break}return n.prev=1,n.next=4,t.getUser(e.uid);case 4:r=n.sent,M(B(r)),x("ADMIN"===r.role),y(!1),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),console.log(n.t0),y(!1);case 14:n.next=19;break;case 16:M(null),x(!1),y(!1);case 19:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}())}),[]),Object(r.useEffect)((function(){var n=!1;return function(){var e=Object(m.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAvailableSpots(P,z);case 2:r=e.sent,n||o(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){n=!0}}),[P,z,q]),Object(r.useEffect)((function(){var n=!1,e=function(){var n=new Date;return{day:n.getDay(),hour:n.getHours(),minutes:n.getMinutes()}}(),t=L.filter((function(n){return H(n,A(P))&&!I(n,e,A(P))}));return n||b(t),function(){n=!0}}),[L,P]);var H=function(n,e){return n.occure.indexOf(e)>-1},I=function(n,e,t){return e.day===t&&n.startsAt+1<=e.hour},Z=function(){var n=Object(m.a)(d.a.mark((function n(){var e;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getUser(q.uid);case 2:e=n.sent,M(e);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return a.a.createElement(O.Provider,{value:{availableSpots:u,isLoading:E,isAdmin:g,handleSelectDate:function(n){F(function(n){return n.setHours(0,0,0,0)}(n)),C(En)},handleSelectTraining:function(n){return C(n)},refreshUserData:Z,selectedDate:P,selectedTraining:z,trainings:p,userData:q}},e)};function kn(){var n=Object(h.a)(["\n  margin-bottom: 15px;\n"]);return kn=function(){return n},n}var Sn=o.d.div(kn()),zn=function(n){var e=n.onClick,t=n.value;return a.a.createElement(j,{onClick:e},t)},Cn=F(),Tn=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return new Date(e).setHours(0,0,0,0)+24*n*60*60*1e3}(7),Dn=function(n){var e=n.headerLabel,t=Object(r.useContext)(O),i=t.handleSelectDate,c=t.selectedDate;return a.a.createElement(Sn,null,a.a.createElement(y,null,e),a.a.createElement(b.a,{dateFormat:"dd/MM/yyyy",selected:c,onChange:function(n){return i(n)},minDate:Cn,maxDate:Tn,customInput:a.a.createElement(zn,null)}))};function Pn(){var n=Object(h.a)(["\n  position: fixed;\n  background-color: ",";\n  width: 300px;\n  height: 50px;\n  top: 50%;\n  right: 0;\n  transition: transform 0.5s ease;\n  border: 1px solid black;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  ",";\n"]);return Pn=function(){return n},n}var An=o.d.div(Pn(),(function(n){return n.theme.white}),(function(n){return n.isVisible?"transform: translateX(-20px) translateY(50%)":"transform: translateX(100%) translateY(50%)"})),Fn=function(n){var e=n.children,t=n.isVisible;return a.a.createElement(An,{isVisible:t},e)},Bn=function(n){var e=n.isActive,t=void 0!==e&&e,r=n.onClick,i=n.trainingName;return a.a.createElement(j,{isActive:t,onClick:r},i)};function Nn(){var n=Object(h.a)(["\n  margin-right: 10px;\n  margin-top: 10px;\n\n  &:first-child {\n    margin-top: 0;\n  }\n\n  &:last-child {\n    margin-right: 0;\n  }\n\n  @media (min-width: ",") {\n    margin-top: 0;\n  }\n"]);return Nn=function(){return n},n}function Un(){var n=Object(h.a)(["\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: ",") {\n    flex-direction: row;\n  }\n"]);return Un=function(){return n},n}function Ln(){var n=Object(h.a)(["\n  margin-bottom: 15px;\n"]);return Ln=function(){return n},n}var Wn=o.d.div(Ln()),Rn=o.d.ul(Un(),(function(n){return n.theme.mobileBP})),Vn=o.d.li(Nn(),(function(n){return n.theme.mobileBP})),qn=function(n){var e=n.headerLabel,t=Object(r.useContext)(O),i=t.trainings,c=t.handleSelectTraining,u=t.selectedTraining;return a.a.createElement(Wn,null,a.a.createElement(y,null,e),a.a.createElement(Rn,null,0===i.length?I:i.map((function(n){return a.a.createElement(Vn,{key:n.name},a.a.createElement(Bn,{isActive:u.value===n.value,trainingName:n.name,onClick:function(){return c(n)}}))}))))};function Mn(){var n=Object(h.a)(["\n  background-color: ",";\n  color: ",";\n  border: none;\n  padding: 5px 10px;\n  border-radius: 3px;\n  cursor: pointer;\n\n  transition: all 0.3s ease;\n\n  &:hover {\n    background-color: ",";\n    color: ",";\n    border: 1px solid ",";\n  }\n"]);return Mn=function(){return n},n}var Hn=o.d.button(Mn(),(function(n){return n.theme.primary}),(function(n){return n.theme.white}),(function(n){return n.theme.white}),(function(n){return n.theme.primary}),(function(n){return n.theme.primary})),In=function(n){var e=n.label,t=n.onClick;return a.a.createElement(Hn,{onClick:t},e)};function Zn(){var n=Object(h.a)(["\n  margin-bottom: 10px;\n"]);return Zn=function(){return n},n}var Jn=o.d.div(Zn()),Xn=function(n){var e=n.label,t=Object(r.useContext)(O),i=t.availableSpots;return 0!==t.trainings.length&&a.a.createElement(Jn,null,a.a.createElement("span",null,e),a.a.createElement("span",null,i))};function Yn(){var n=Object(h.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  color: ",";\n  padding: 5px;\n  margin-left: 10px;\n\n  cursor: pointer;\n"]);return Yn=function(){return n},n}function Kn(){var n=Object(h.a)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n"]);return Kn=function(){return n},n}var Qn=o.d.div(Kn()),_n=o.d.button(Yn(),(function(n){return n.theme.white}),(function(n){return n.theme.secondary}),(function(n){return n.theme.secondary})),Gn=function(n){var e=n.handleSignOutFromTraining,t=n.user,i=Object(r.useContext)(O).userData;return a.a.createElement(Qn,null,t.userName,i&&t.uid===i.uid?a.a.createElement(_n,{onClick:e},q):null)};function $n(){var n=Object(h.a)(["\n  margin-bottom: 10px;\n"]);return $n=function(){return n},n}function ne(){var n=Object(h.a)(["\n  list-style: none;\n  margin-top: 20px;\n"]);return ne=function(){return n},n}var ee=o.d.ul(ne()),te=o.d.li($n()),re=function(n){var e=n.handleSignOutFromTraining,t=Object(r.useState)([]),i=Object(f.a)(t,2),c=i[0],u=i[1],o=Object(r.useState)(""),l=Object(f.a)(o,2),s=l[0],p=l[1],b=Object(r.useContext)(wn),h=Object(r.useContext)(O),v=h.selectedDate,g=h.selectedTraining,x=h.trainings,j=h.userData;return Object(r.useEffect)((function(){var n=!1;return function(){var e=Object(m.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P(v,g),e.next=3,b.getReservations(t,g.value);case 3:r=e.sent,n||u(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),n||p("".concat(g.name," "," | "," ").concat(function(n){var e=new Date(n),t=e.getDate(),r=e.getMonth()+1,a=e.getFullYear();return"".concat(t,"-").concat(r,"-").concat(a)}(v))),function(){n=!0}}),[v,g,j]),x.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,L," ",s),a.a.createElement(ee,null,0===c.length?H:c.map((function(n){return a.a.createElement(te,{key:n.email},a.a.createElement(Gn,{handleSignOutFromTraining:e,user:n}))}))))};function ae(){var n=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-top: 30px;\n  padding: 0;\n\n  @media (min-width: ",") {\n    margin-top: 0;\n    padding: 0 30px;\n  }\n"]);return ae=function(){return n},n}function ie(){var n=Object(h.a)([""]);return ie=function(){return n},n}function ce(){var n=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  padding: 0 10px;\n  margin: 30px auto;\n\n  @media (min-width: ",") {\n    max-width: 90vw;\n    flex-direction: row;\n  }\n"]);return ce=function(){return n},n}var ue=o.d.section(ce(),(function(n){return n.theme.mobileBP})),oe=o.d.div(ie()),le=o.d.div(ae(),(function(n){return n.theme.mobileBP})),se=function(){var n=Object(r.useState)(null),e=Object(f.a)(n,2),t=e[0],i=e[1],c=Object(r.useContext)(wn),u=Object(r.useContext)(O),o=u.refreshUserData,l=u.selectedDate,s=u.selectedTraining,p=u.trainings,b=u.userData,h=function(n,e){i(n),setTimeout((function(){i(null)}),e)},v=function(){var n=Object(m.a)(d.a.mark((function n(){var e;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.reserveTrainingSpot(l,s,b);case 2:e=n.sent,o(),h(e.message,3e3);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),g=function(){var n=Object(m.a)(d.a.mark((function n(){var e;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.freeTrainingSpot(l,s,b);case 2:e=n.sent,o(),h(e.message,3e3);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return a.a.createElement(ue,null,a.a.createElement(oe,null,a.a.createElement(Dn,{headerLabel:Q}),a.a.createElement(qn,{headerLabel:_}),a.a.createElement(Xn,{label:U}),p.length>0&&a.a.createElement(In,{label:"Zapisz mnie",onClick:v})),a.a.createElement(le,null,a.a.createElement(re,{handleSignOutFromTraining:g})),a.a.createElement(Fn,{isVisible:!!t},t))},de=t(132),me=t.n(de),fe=function(n){var e=n.styles;return a.a.createElement("img",{alt:"Fight Kompany",src:me.a,style:Object(S.a)({display:"block",maxWidth:"100%"},e)})},pe="/rezerwuj",be=t(19);function he(){var n=Object(h.a)(["\n  padding: 0;\n  margin-top: 30px;\n\n  @media (min-width: ",") {\n    padding: 30px 50px;\n    margin-top: 0;\n  }\n"]);return he=function(){return n},n}function ve(){var n=Object(h.a)([""]);return ve=function(){return n},n}function ge(){var n=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 0 10px;\n  margin: 30px auto;\n\n  @media (min-width: ",") {\n    max-width: 90vw;\n    flex-direction: row;\n  }\n"]);return ge=function(){return n},n}function xe(){var n=Object(h.a)(["\n  text-decoration: none;\n  color: ",";\n"]);return xe=function(){return n},n}var je=Object(o.d)(be.b)(xe(),(function(n){return n.theme.secondary})),we=o.d.section(ge(),(function(n){return n.theme.mobileBP})),Ee=o.d.div(ve()),ye=o.d.div(he(),(function(n){return n.theme.mobileBP})),Oe=function(){var n=Object(r.useContext)(O).userData;return a.a.createElement(we,null,a.a.createElement(Ee,null,a.a.createElement(fe,null)),a.a.createElement(ye,null,a.a.createElement(Dn,{headerLabel:Q}),a.a.createElement(qn,{headerLabel:_}),a.a.createElement(Xn,{label:U}),!n&&a.a.createElement(je,{to:"/zaloguj"},G)))};function ke(){var n=Object(h.a)([""]);return ke=function(){return n},n}function Se(){var n=Object(h.a)(["\n  padding: 10px;\n  margin: 0 auto;\n  margin-top: 30px;\n\n  @media (min-width: ",") {\n    padding: 0;\n    max-width: 90vw;\n  }\n"]);return Se=function(){return n},n}function ze(){var n=Object(h.a)(["\n  list-style: none;\n"]);return ze=function(){return n},n}o.d.ul(ze()),o.d.section(Se(),(function(n){return n.theme.mobileBP})),o.d.li(ke());function Ce(){var n=Object(h.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return Ce=function(){return n},n}var Te=o.d.section(Ce()),De=function(){return a.a.createElement(Te,null,"not found")},Pe=t(23),Ae=t(66),Fe=function(n){var e=n.initialValues,t=n.onSubmit,r=n.validationSchema,i=n.children;return a.a.createElement(Ae.a,{initialValues:e,onSubmit:t,validationSchema:r},(function(){return a.a.createElement(a.a.Fragment,null,i)}))},Be=t(91);function Ne(){var n=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]);return Ne=function(){return n},n}function Ue(){var n=Object(h.a)(["\n  display: block;\n  width: 100%;\n  padding: 5px;\n  background-color: ",";\n  border: 1px solid ",";\n  font-size: ",";\n\n  &:focus {\n    outline: none;\n    border: 2px solid black;\n    padding: 4px;\n  }\n"]);return Ue=function(){return n},n}function Le(){var n=Object(h.a)(["\n  font-size: ",";\n  margin-bottom: 5px;\n"]);return Le=function(){return n},n}var We=o.d.label(Le(),(function(n){return n.theme.fontS})),Re=o.d.input(Ue(),(function(n){return n.theme.white}),(function(n){return n.theme.secondary}),(function(n){return n.theme.fontM})),Ve=o.d.div(Ne()),qe=function(n){var e=n.type,t=n.label,r=Object(Be.a)(n,["type","label"]);return a.a.createElement(Ve,null,a.a.createElement(We,null,t),a.a.createElement(Re,Object.assign({type:e},r)))},Me=function(n){var e=n.error;return n.isVisible?a.a.createElement("p",null,e):null};function He(){var n=Object(h.a)(["\n  position: relative;\n  width: 100%;\n  margin-bottom: 20px;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n\n  & > p:last-child {\n    position: absolute;\n    left: 0;\n    bottom: -15px;\n    font-size: 10px;\n    color: ",";\n  }\n"]);return He=function(){return n},n}var Ie=o.d.div(He(),(function(n){return n.theme.primary})),Ze=function(n){var e=n.name,t=n.type,r=n.width,i=void 0===r?"100%":r,c=Object(Be.a)(n,["name","type","width"]),u=Object(Ae.b)(),o=u.setFieldTouched,l=u.handleChange,s=u.errors,d=u.touched;return a.a.createElement(Ie,{style:{width:i}},a.a.createElement(qe,Object.assign({name:e,type:t,onBlur:function(){return o(e)},onChange:l(e)},c)),a.a.createElement(Me,{error:s[e],isVisible:d[e]}))};function Je(){var n=Object(h.a)(["\n  display: block;\n  background-color: ",";\n  border: none;\n  padding: 10px 15px;\n  color: ",";\n  font-size: ",";\n  text-transform: uppercase;\n  cursor: pointer;\n\n  &:focus {\n    outline: none;\n  }\n"]);return Je=function(){return n},n}var Xe=o.d.button(Je(),(function(n){return n.theme.secondary}),(function(n){return n.theme.white}),(function(n){return n.theme.fontM})),Ye=function(n){var e=n.label,t=n.style,r=Object(Ae.b)().handleSubmit;return a.a.createElement(Xe,{type:"submit",onClick:r,style:t},e)};function Ke(){var n=Object(h.a)(["\n  width: 100%;\n  max-width: 320px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 30px auto;\n  padding: 0 10px;\n\n  @media (min-width: ",") {\n    padding: 0;\n  }\n"]);return Ke=function(){return n},n}var Qe=o.d.section(Ke(),(function(n){return n.theme.mobileBP})),_e=function(n){var e=n.children;return a.a.createElement(Qe,null,a.a.createElement(fe,{styles:{width:"200px",marginBottom:"30px"}}),e)};Pe.c({mixed:{required:bn},string:{email:hn,min:function(n){return"".concat(n.label," ").concat(vn," ").concat(n.min," ").concat(gn)}}});var Ge=Pe.a().shape({email:Pe.d().required().email().label(R),userName:Pe.d().required().min(6).label(en),password:Pe.d().required().min(6).label(Z),confirmPassword:Pe.d().oneOf([Pe.b("password"),null],xn).required().label(Y)}),$e={email:"",userName:"",password:"",confirmPassword:""},nt=function(){var n=Object(r.useState)(null),e=Object(f.a)(n,2),t=e[0],i=e[1],c=Object(u.g)(),o=Object(r.useContext)(wn),l=function(n,e){i(n),setTimeout((function(){i(null)}),e)};return a.a.createElement(_e,null,a.a.createElement(Fe,{initialValues:$e,onSubmit:function(n){return function(n){var e=n.email,t=n.password,r=n.userName;o.doCreateUserWithEmailAndPassword(e,t).then(function(){var n=Object(m.a)(d.a.mark((function n(e){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.saveUserToFirestore(e,{strikes:0,assignedTo:[],role:"USER",userName:r});case 2:c.push(pe);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(n){"auth/email-already-in-use"===n.code?l(fn,3e3):"auth/weak-password"===n.code&&l(un,3e3)}))}(n)},validationSchema:Ge},a.a.createElement(Ze,{name:"email",type:"email",label:R}),a.a.createElement(Ze,{name:"userName",type:"text",label:en}),a.a.createElement(Ze,{name:"password",type:"password",label:Z}),a.a.createElement(Ze,{name:"confirmPassword",type:"password",label:Y}),a.a.createElement(Ye,{label:X})),a.a.createElement(Fn,{isVisible:!!t},t))};function et(){var n=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  max-width: 400px;\n  margin: 25px auto;\n"]);return et=function(){return n},n}function tt(){var n=Object(h.a)(["\n  display: flex;\n  margin-top: 30px;\n"]);return tt=function(){return n},n}function rt(){var n=Object(h.a)(["\n  text-decoration: none;\n  font-size: ",";\n  color: ",";\n  margin-left: 5px;\n"]);return rt=function(){return n},n}var at=Object(o.d)(be.b)(rt(),(function(n){return n.theme.fontM}),(function(n){return n.theme.primary})),it=o.d.div(tt());o.d.div(et());Pe.c({mixed:{required:bn},string:{email:hn,min:function(n){return"".concat(n.label," ").concat(vn," ").concat(n.min," ").concat(gn)}}});var ct=Pe.a().shape({email:Pe.d().required().email().label(R),password:Pe.d().required().min(6).label(Z)}),ut={email:"",password:""},ot=function(){var n=Object(r.useState)(null),e=Object(f.a)(n,2),t=e[0],i=e[1],c=Object(r.useContext)(wn),o=Object(u.g)(),l=function(n,e){i(n),setTimeout((function(){i(null)}),e)};return a.a.createElement(_e,null,a.a.createElement(Fe,{initialValues:ut,onSubmit:function(n){return function(n){var e=n.email,t=n.password;c.doSignInWithEmailAndPassword(e,t).then((function(){return o.push(pe)})).catch((function(n){"auth/user-not-found"===n.code?l(mn,3e3):"auth/wrong-password"===n.code&&l(pn,3e3)}))}(n)},validationSchema:ct},a.a.createElement(Ze,{name:"email",type:"email",label:R}),a.a.createElement(Ze,{name:"password",type:"password",label:Z}),a.a.createElement(Ye,{label:M})),a.a.createElement(it,null,a.a.createElement("p",null,W),a.a.createElement(at,{to:"/zarejestruj"},J)),a.a.createElement(Fn,{isVisible:!!t},t))};function lt(){var n=Object(h.a)(["\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return lt=function(){return n},n}function st(){var n=Object(h.a)(["\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n\n  & div {\n    position: absolute;\n    width: 16px;\n    height: 16px;\n    border-radius: 50%;\n    background: ",";\n    animation: lds-grid 1.2s linear infinite;\n  }\n\n  & div:nth-child(1) {\n    top: 8px;\n    left: 8px;\n    animation-delay: 0s;\n  }\n\n  & div:nth-child(2) {\n    top: 8px;\n    left: 32px;\n    animation-delay: -0.4s;\n  }\n\n  & div:nth-child(3) {\n    top: 8px;\n    left: 56px;\n    animation-delay: -0.8s;\n  }\n\n  & div:nth-child(4) {\n    top: 32px;\n    left: 8px;\n    animation-delay: -0.4s;\n  }\n\n  & div:nth-child(5) {\n    top: 32px;\n    left: 32px;\n    animation-delay: -0.8s;\n  }\n\n  & div:nth-child(6) {\n    top: 32px;\n    left: 56px;\n    animation-delay: -1.2s;\n  }\n\n  & div:nth-child(7) {\n    top: 56px;\n    left: 8px;\n    animation-delay: -0.8s;\n  }\n\n  & div:nth-child(8) {\n    top: 56px;\n    left: 32px;\n    animation-delay: -1.2s;\n  }\n\n  & div:nth-child(9) {\n    top: 56px;\n    left: 56px;\n    animation-delay: -1.6s;\n  }\n\n  @keyframes lds-grid {\n    0%,\n    100% {\n      opacity: 1;\n    }\n    50% {\n      opacity: 0.5;\n    }\n  }\n"]);return st=function(){return n},n}var dt=o.d.div(st(),(function(n){return n.theme.secondary})),mt=o.d.div(lt()),ft=function(){return a.a.createElement(mt,null,a.a.createElement(dt,null,a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null)))};function pt(){var n=Object(h.a)(["\n  ",";\n  cursor: pointer;\n"]);return pt=function(){return n},n}function bt(){var n=Object(h.a)(["\n  list-style: none;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  max-width: 400px;\n  margin: 0;\n\n  @media (min-width: ",") {\n    justify-content: flex-end;\n    max-width: 100%;\n  }\n"]);return bt=function(){return n},n}function ht(){var n=Object(h.a)(["\n  width: 100%;\n  background-color: ",";\n  border-bottom: 2px solid ",";\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  padding: 20px 10px;\n"]);return ht=function(){return n},n}function vt(){var n=Object(h.a)(["\n  ","\n"]);return vt=function(){return n},n}function gt(){var n=Object(h.a)(["\n  color: ",";\n  font-size: ",";\n  padding: 10px;\n  margin-left: 10px;\n  text-decoration: none;\n\n  &:first-child {\n    margin-left: 0;\n  }\n\n  @media (min-width: ",") {\n    font-size: ",";\n  }\n"]);return gt=function(){return n},n}var xt,jt=Object(o.c)(gt(),(function(n){return n.theme.secondary}),(function(n){return n.theme.fontM}),(function(n){return n.theme.mobileBP}),(function(n){return n.theme.fontL})),wt=Object(o.d)(be.b)(vt(),jt),Et=o.d.nav(ht(),(function(n){return n.theme.white}),(function(n){return n.theme.secondary})),yt=o.d.ul(bt(),(function(n){return n.theme.mobileBP})),Ot=o.d.a(pt(),jt),kt=(xt=Ot,function(n){var e=Object.assign({},n),t=Object(r.useContext)(wn),i=Object(u.g)();return a.a.createElement(xt,Object.assign({onClick:function(){t.doSignOut(),i.push("/")}},e))}),St=a.a.createElement(a.a.Fragment,null,a.a.createElement("li",null,a.a.createElement(wt,{to:"/"},V)),a.a.createElement("li",null,a.a.createElement(wt,{to:"/zaloguj"},$))),zt=function(n){var e=n.isAdmin,t=Object(r.useContext)(O).userData;return a.a.createElement(Et,null,a.a.createElement(yt,null,t?function(n){return a.a.createElement(a.a.Fragment,null,a.a.createElement("li",null,a.a.createElement(wt,{to:pe},K)),n?a.a.createElement("li",null,a.a.createElement(wt,{to:"/admin"},N)):null,a.a.createElement("li",null,a.a.createElement(kt,null,nn)))}(e):St))},Ct=function(n){var e=n.children,t=n.path,i=n.isAdmin,c=void 0!==i&&i,o=n.isAdminRoute,l=void 0!==o&&o,s=Object(r.useContext)(wn).auth.currentUser,d=a.a.createElement(u.b,{path:t},e),m=a.a.createElement(u.a,{to:"/"});return l?c?d:m:s?d:m},Tt={fontFamily:"Barlow Semi Condensed",fontFamilyLight:"Barlow Light Condensed",fontFamilySecondary:"Roboto Light Condensed",fontM:"18px",fontS:"16px",fontL:"24px",primary:"#ed1c24",secondary:"#0e0d3e",grey:"#eaeaea",white:"#ffffff",mobileBP:"767px"};function Dt(){var n=Object(h.a)(["\n    *, *::after, *::before {\n        box-sizing: border-box;\n        padding: 0;\n        margin: 0;\n    }\n\n    body {\n        font-family: ",", Open-Sans, Helvetica, Sans-Serif;\n        font-size: ",";\n        color: ",";\n        overflow-x: hidden;\n    }\n\n    #root {\n        height: 100vh;\n        height: calc(var(--vh, 1vh) * 100);\n    }\n"]);return Dt=function(){return n},n}var Pt=Object(o.b)(Dt(),Tt.fontFamily,Tt.fontM,Tt.secondary);var At=function(){var n=Object(r.useContext)(O),e=n.isLoading,t=n.isAdmin,i=n.userData,c=Object(u.g)();return Object(r.useEffect)((function(){var n=function(){var n=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(n,"px"))};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),Object(r.useEffect)((function(){i&&c.push(pe)}),[i]),a.a.createElement(o.a,{theme:Tt},a.a.createElement(Pt,null),e?a.a.createElement(ft,null):a.a.createElement(a.a.Fragment,null,a.a.createElement(zt,{isAdmin:t}),a.a.createElement(u.d,null,a.a.createElement(u.b,{exact:!0,path:"/"},a.a.createElement(Oe,null)),a.a.createElement(u.b,{exact:!0,path:"/zarejestruj"},a.a.createElement(nt,null)),a.a.createElement(u.b,{exact:!0,path:"/zaloguj"},a.a.createElement(ot,null)),a.a.createElement(Ct,{exact:!0,path:pe},a.a.createElement(se,null)),a.a.createElement(Ct,{exact:!0,path:"/admin",isAdmin:t,isAdminRoute:!0},a.a.createElement(l,null)),a.a.createElement(u.b,null,a.a.createElement(De,null)))))};c.a.render(a.a.createElement(wn.Provider,{value:new function n(){var e=this;Object(z.a)(this,n),this.getAvailableSpots=function(){var n=Object(m.a)(d.a.mark((function n(t,r){var a,i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r){n.next=2;break}return n.abrupt("return",on);case 2:return a=P(t,r),n.next=5,e.getReservations(a,r.value);case 5:return i=n.sent,n.abrupt("return",r.capacity-i.length);case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),this.getReservations=function(){var n=Object(m.a)(d.a.mark((function n(t,r){var a,i,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return",[]);case 2:return a=[],i=e.db.doc("".concat(r,"/").concat(t)),n.prev=4,n.next=7,i.get();case 7:(c=n.sent).exists?a=c.data().reservations:console.log("No such document! ".concat(r,"/").concat(t)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(4),console.log("Error getting document! - ".concat(r,"/").concat(t),n.t0);case 14:return n.abrupt("return",a);case 15:case"end":return n.stop()}}),n,null,[[4,11]])})));return function(e,t){return n.apply(this,arguments)}}(),this.getTrainings=Object(m.a)(d.a.mark((function n(){var t,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.db.collection("trainings").get();case 3:return t=n.sent,r=t.docs.map((function(n){return n.data()})),n.abrupt("return",r);case 8:return n.prev=8,n.t0=n.catch(0),console.log("Error getting trainings",n.t0),n.abrupt("return",[]);case 12:case"end":return n.stop()}}),n,null,[[0,8]])}))),this.getUser=function(){var n=Object(m.a)(d.a.mark((function n(t){var r,a,i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.db.doc("users/".concat(t)),n.prev=1,n.next=4,a.get();case 4:(i=n.sent).exists?r=i.data():console.log("There is no users with given id",t),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.log("Error getting user",t);case 11:return n.abrupt("return",r);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),this.reserveTrainingSpot=function(){var n=Object(m.a)(d.a.mark((function n(t,r,a){var i,c,u;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&r&&a){n.next=2;break}return n.abrupt("return",D(400,ln));case 2:return i=P(t,r),n.next=5,e.getReservations(i,r.value);case 5:if(c=n.sent,!!!c.find((function(n){return n.uid===a.uid}))){n.next=9;break}return n.abrupt("return",D(204,tn));case 9:if(c.length!==r.capacity){n.next=11;break}return n.abrupt("return",D(204,cn));case 11:return u=Object(S.a)(Object(S.a)({},a),{},{assignedTo:[].concat(Object(k.a)(a.assignedTo),[i]).sort()}),n.prev=12,n.next=15,e.db.doc("".concat(r.value,"/").concat(i)).set({reservations:[].concat(Object(k.a)(c),[u])});case 15:return n.next=17,e.updateUser(u.uid,u);case 17:return n.abrupt("return",D(200,sn));case 20:return n.prev=20,n.t0=n.catch(12),console.log("Error saving data",n.t0),n.abrupt("return",D(500,an));case 24:case"end":return n.stop()}}),n,null,[[12,20]])})));return function(e,t,r){return n.apply(this,arguments)}}(),this.freeTrainingSpot=function(){var n=Object(m.a)(d.a.mark((function n(t,r,a){var i,c,u,o;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&r&&a){n.next=2;break}return n.abrupt("return",D(400,ln));case 2:return i=P(t,r),n.next=5,e.getReservations(i,r.value);case 5:return c=n.sent,u=c.filter((function(n){return n.uid!==a.uid})),o=Object(S.a)(Object(S.a)({},a),{},{assignedTo:a.assignedTo.filter((function(n){return n!==i}))}),n.prev=8,n.next=11,e.db.doc("".concat(r.value,"/").concat(i)).set({reservations:u});case 11:return n.next=13,e.updateUser(o.uid,o);case 13:return n.abrupt("return",D(200,dn));case 16:return n.prev=16,n.t0=n.catch(8),console.log("Error saving data",n.t0),n.abrupt("return",D(500,rn));case 20:case"end":return n.stop()}}),n,null,[[8,16]])})));return function(e,t,r){return n.apply(this,arguments)}}(),this.updateUser=function(){var n=Object(m.a)(d.a.mark((function n(t,r){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{e.db.doc("users/".concat(t)).set(r)}catch(a){console.log("Couldn't update user",t,a)}case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),this.doCreateUserWithEmailAndPassword=function(n,t){return e.auth.createUserWithEmailAndPassword(n,t)},this.doSignInWithEmailAndPassword=function(n,t){return e.auth.signInWithEmailAndPassword(n,t)},this.doSignOut=function(){return e.auth.signOut()},this.doPasswordReset=function(n){return e.auth.sendPasswordResetEmail(n)},this.doPasswordUpdate=function(n){return e.auth.currentUser.updatePassword(n)},this.saveUserToFirestore=function(){var n=Object(m.a)(d.a.mark((function n(t,r){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,e.db.doc("users/".concat(t.user.uid)).set(Object(S.a)({uid:t.user.uid,email:t.user.email},r));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(e,t){return n.apply(this,arguments)}}(),T.a.initializeApp(jn),this.auth=T.a.auth(),this.db=T.a.firestore()}},a.a.createElement(On,null,a.a.createElement(be.a,{basename:"/"},a.a.createElement(At,null)))),document.getElementById("root"))}},[[136,1,2]]]);
//# sourceMappingURL=main.6ab95810.chunk.js.map